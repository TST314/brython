<!doctype html>
<html>
<meta charset="iso-8859-1">
<head>
<style>
body,td,th{
    font-family:sans-serif;
    font-size:12px;
}
td {
    border-style:solid;
    border-width: 0px 0px 1px 0px;
    border-color: #000;
    padding:3px;
}

th {
    border-style:solid;
    border-width: 1px;
    border-color: #000;
    background-color: #61D7A4;
    padding: 4px;
}

span{font-size:15px;
    margin-left:10px;}
a.sort_link{
    margin-left:10px;
    font-size: 15px;
    text-decoration:none;
}

</style>

<script type="text/javascript" src="../src/brython_builtins.js"></script>
<script type="text/javascript" src="../src/version_info.js"></script>
<script type="text/javascript" src="../src/py2js.js"></script>
<script type="text/javascript" src="../src/py_object.js"></script>
<script type="text/javascript" src="../src/py_type.js"></script>
<script type="text/javascript" src="../src/py_utils.js"></script>
<script type="text/javascript" src="../src/py_sort.js"></script>
<script type="text/javascript" src="../src/py_builtin_functions.js"></script>
<script type="text/javascript" src="../src/py_exceptions.js"></script>
<script type="text/javascript" src="../src/py_range_slice.js"></script>
<script type="text/javascript" src="../src/py_bytes.js"></script>
<script type="text/javascript" src="../src/py_set.js"></script>
<script type="text/javascript" src="../src/js_objects.js"></script>
<script type="text/javascript" src="../src/stdlib_paths.js"></script>
<script type="text/javascript" src="../src/py_import.js"></script>
<script type="text/javascript" src="../src/unicode.min.js"></script>
<script type="text/javascript" src="../src/py_string.js"></script>
<script type="text/javascript" src="../src/py_int.js"></script>
<script type="text/javascript" src="../src/py_long_int.js"></script>
<script type="text/javascript" src="../src/py_float.js"></script>
<script type="text/javascript" src="../src/py_complex.js"></script>
<script type="text/javascript" src="../src/py_dict.js"></script>
<script type="text/javascript" src="../src/py_list.js"></script>
<script type="text/javascript" src="../src/py_generator.js"></script>
<script type="text/javascript" src="../src/py_dom.js"></script>

<script type="text/javascript" src="../src/builtin_modules.js"></script>
<script type="text/javascript" src="../src/py_import_hooks.js"></script>
<script type="text/javascript" src="../src/async.js"></script>

<script type="text/javascript" src="../src/brython_stdlib.js"></script>

</head>
<body onload="brython(1)">
Page to test exception tracebacks.<p>
<script type="text/python">
import traceback

# issue 859
def f():
    return 1 / 0

try:
    f()
except Exception:
    exception_info = traceback.format_exc()
    assert 'f()' in exception_info
    assert '1 / 0' in exception_info
    assert ', in f' in exception_info

# issue 885
try:
    1/0
except:
    assert '1/0' in traceback.format_exc()

# issue 887
try:
    exec('def f(): return 1/0\nf()')
except ZeroDivisionError:
    trace = traceback.format_exc()
    assert 'exec(\'def f(): return 1/0\\nf()\')' in trace
    assert 'f()' in trace
    assert 'def f(): return 1/0\\n' in trace

# issue 961
from z import f

try:
    f()
except ZeroDivisionError:
    trace = traceback.format_exc()
    assert "line 9, in f" in trace
    assert "line 6, in h" in trace
    assert "line 5, in <lambda>" in trace
    assert "line 2, in g" in trace

from browser import document
document <= "All tests passed"
</script>

</body>
</html>
